{
    "$schema": "https://json-schema.org/draft-07/schema#",
    "title": "Report",
    "description": "Vehicle information",

    "definitions": {
        "vin_code": {
            "type": "string",
            "pattern": "[0-9ABCDEFGHJKLMNPRSTUVWXYZ]+",
            "minLength": 17,
            "maxLength": 17
        },
        "grz_code": {
            "type": "string",
            "pattern": "[0-9АВЕКМНОРСТУХ]+",
            "minLength": 6,
            "maxLength": 9
        },
        "sts_code": {
            "type": "string",
            "pattern": "[0-9А-ЯЁ ]+",
            "minLength": 10,
            "maxLength": 12
        },
        "pts_code": {
            "type": "string",
            "pattern": "[0-9А-ЯЁ ]+",
            "minLength": 10,
            "maxLength": 12
        },
        "body_code": {
            "type": "string",
            "pattern": "[0-9A-ZА-ЯЁ\\- ]+",
            "minLength": 7,
            "maxLength": 15
        },
        "chassis_code": {
            "type": "string",
            "pattern": "[0-9A-ZА-ЯЁ\\- ]+",
            "minLength": 7,
            "maxLength": 15
        },
        "brand_unique_id": {
            "type": "string",
            "pattern": "[0-9A-Z_]+",
            "minLength": 4,
            "maxLength": 128
        },
        "model_unique_id": {
            "type": "string",
            "pattern": "[0-9A-Z_]+",
            "minLength": 4,
            "maxLength": 128
        },
        "geo_raw_data": {
            "type": "object",
            "properties": {
                "country": {
                    "type": ["string", "null"],
                    "description" : "Страна",
                    "examples": ["Россия"]
                },
                "region": {
                    "type": ["string", "null"],
                    "description" : "Регион (область)",
                    "examples": ["Пензенская"]
                },
                "city": {
                    "type": ["string", "null"],
                    "description" : "Город",
                    "examples": ["Пушкино"]
                },
                "street": {
                    "type": ["string", "null"],
                    "description" : "Улица",
                    "examples": ["Ленина"]
                },
                "house": {
                    "type": ["string", "integer", "null"],
                    "description" : "Дом",
                    "examples": ["44а"]
                }
            }
        },
        "datetime": {
            "type": "string",
            "pattern": "\\d{4}\\-\\d{1,2}\\-\\d{1,2} \\d{1,2}:\\d{1,2}:\\d{1,2}",
            "minLength": 14,
            "maxLength": 19
        }
    },

    "type": "object",

    "properties": {
        "identifiers": {
            "type": "object",
            "properties": {
                "vehicle": {
                    "type": "object",
                    "description" : "Идентификаторы ТС",
                    "properties": {
                        "vin": {
                            "description" : "VIN код",
                            "oneOf": [
                                { "type": "null" }, { "$ref": "#/definitions/vin_code" }
                            ],
                            "examples": ["C5KY36SZRBD974789"],
                            "fillable_by": [
                                "base",
                                "base.ext",
                                "gibdd.history",
                                "base.taxi",
                                "gibdd.eaisto",
                                "base.tech",
                                "tech.ext"
                            ]
                        },
                        "reg_num": {
                            "description" : "Государственный регистрационный знак (ГРЗ)",
                            "oneOf": [
                                { "type": "null" }, { "$ref": "#/definitions/grz_code" }
                            ],
                            "examples": ["А332АВ177"],
                            "fillable_by": [
                                "base",
                                "base.ext",
                                "gibdd.eaisto"
                            ]
                        },
                        "sts": {
                            "description" : "Номер СТС (свидетельства регистрации ТС)",
                            "oneOf": [
                                { "type": "null" }, { "$ref": "#/definitions/sts_code" }
                            ],
                            "examples": ["3104847107"],
                            "fillable_by": [
                                "base",
                                "base.ext"
                            ]
                        },
                        "pts": {
                            "description" : "Номер ПТС (паспорт ТС)",
                            "oneOf": [
                                { "type": "null" }, { "$ref": "#/definitions/pts_code" }
                            ],
                            "examples": ["36КС619977"],
                            "fillable_by": [
                                "base.ext",
                                "gibdd.history"
                            ]
                        },
                        "body": {
                            "description" : "Номер кузова",
                            "oneOf": [
                                { "type": "null" }, { "$ref": "#/definitions/body_code" }
                            ],
                            "examples": ["KCA275-9673180"],
                            "fillable_by": [
                                "base",
                                "base.ext",
                                "gibdd.history",
                                "base.taxi"
                            ]
                        },
                        "chassis": {
                            "description" : "Номер шасси",
                            "oneOf": [
                                { "type": "null" }, { "$ref": "#/definitions/chassis_code" }
                            ],
                            "examples": ["LFPVBM6819793"],
                            "fillable_by": [
                                "base",
                                "base.ext",
                                "base.taxi"
                            ]
                        }
                    }
                }
            }
        },
        "tech_data": {
            "type": "object",
            "description" : "Характеристики ТС",
            "properties": {
                "manufacturer": {
                    "type": "object",
                    "properties": {
                        "name": {
                            "description" : "Наименование производителя",
                            "type": ["string", "null"],
                            "examples": ["N\/A"],
                            "fillable_by": []
                        }
                    }
                },
                "brand": {
                    "type": "object",
                    "properties": {
                        "id": {
                            "description" : "Уникальный идентификатор марки",
                            "oneOf": [
                                { "type": "null" }, { "$ref": "#/definitions/brand_unique_id" }
                            ],
                            "examples": ["ID_MARK_OPEL"],
                            "fillable_by": [
                                "references.base"
                            ]
                        },
                        "name": {
                            "type": "object",
                            "properties": {
                                "original": {
                                    "description" : "Марка",
                                    "type": ["string", "null"],
                                    "examples": ["OPEL MONTEREY"],
                                    "fillable_by": [
                                        "base",
                                        "base.ext",
                                        "gibdd.history",
                                        "base.taxi",
                                        "customs.base",
                                        "gibdd.eaisto"
                                    ]
                                },
                                "rus": {
                                    "description" : "Марка (по-русски)",
                                    "type": ["string", "null"],
                                    "examples": ["Opel"],
                                    "fillable_by": []
                                },
                                "normalized": {
                                    "description" : "Нормализованное значение марки",
                                    "type": ["string", "null"],
                                    "examples": ["Opel"],
                                    "fillable_by": [
                                        "references.base"
                                    ]
                                }
                            }
                        },
                        "logotype": {
                            "type": "object",
                            "properties": {
                                "uri": {
                                    "description" : "URI изображения логотипа марки",
                                    "type": ["string", "null"],
                                    "examples": ["https:\/\/vl.imgix.net\/img\/opel-logo.png"],
                                    "fillable_by": [
                                        "references.base"
                                    ]
                                }
                            }
                        }
                    }
                },
                "model": {
                    "type": "object",
                    "properties": {
                        "id": {
                            "description" : "Уникальный идентификатор модели",
                            "oneOf": [
                                { "type": "null" }, { "$ref": "#/definitions/model_unique_id" }
                            ],
                            "examples": ["ID_MARK_OPEL_MODEL_MONTEREY"],
                            "fillable_by": [
                                "references.base"
                            ]
                        },
                        "name": {
                            "type": "object",
                            "properties": {
                                "original": {
                                    "description" : "Модель",
                                    "type": ["string", "null"],
                                    "examples": ["Monterey"],
                                    "fillable_by": [
                                        "gibdd.history",
                                        "gibdd.eaisto"
                                    ]
                                },
                                "normalized": {
                                    "description" : "Нормализованное значение модели",
                                    "type": ["string", "null"],
                                    "examples": ["Monterey"],
                                    "fillable_by": [
                                        "references.base"
                                    ]
                                }
                            }
                        }
                    }
                },
                "type": {
                    "type": "object",
                    "properties": {
                        "name": {
                            "description" : "Тип кузова ТС",
                            "type": ["string", "null"],
                            "examples": ["Седан", "Универсал"],
                            "fillable_by": [
                                "base",
                                "base.ext",
                                "gibdd.history"
                            ]
                        }
                    }
                },
                "body": {
                    "type": "object",
                    "properties": {
                        "number": {
                            "description" : "Номер Кузова",
                            "oneOf": [
                                { "type": "null" }, { "$ref": "#/definitions/body_code" }
                            ],
                            "examples": ["KCA275-9673180"],
                            "fillable_by": [
                                "base",
                                "base.ext",
                                "gibdd.history",
                                "base.taxi"
                            ]
                        },
                        "color": {
                            "type": "object",
                            "properties": {
                                "name": {
                                    "description" : "Цвет кузова",
                                    "type": ["string", "null"],
                                    "examples": ["Светло Зеленый"],
                                    "fillable_by": [
                                        "base",
                                        "base.ext",
                                        "gibdd.history"
                                    ]
                                },
                                "type": {
                                    "description" : "Тип цвета кузова",
                                    "type": ["string", "null"],
                                    "examples": ["Зеленый"],
                                    "fillable_by": [
                                        "base",
                                        "base.ext"
                                    ]
                                }
                            }
                        }
                    }
                },
                "year": {
                    "description" : "Год выпуска",
                    "type": ["integer", "null"],
                    "minimum": 1800,
                    "examples": [2018],
                    "fillable_by": [
                        "base",
                        "base.ext",
                        "gibdd.eaisto",
                        "base.taxi",
                        "gibdd.history"
                    ]
                },
                "chassis": {
                    "type": "object",
                    "properties": {
                        "number": {
                            "description" : "Номер шасси",
                            "oneOf": [
                                { "type": "null" }, { "$ref": "#/definitions/chassis_code" }
                            ],
                            "examples": ["LFPVBM6819793"],
                            "fillable_by": [
                                "base",
                                "base.ext",
                                "gibdd.history"
                            ]
                        }
                    }
                },
                "engine": {
                    "type": "object",
                    "properties": {
                        "fuel": {
                            "type": "object",
                            "properties": {
                                "type": {
                                    "description" : "Тип топлива",
                                    "type": ["string", "null"],
                                    "enum": ["Бензиновый", "Дизельный", "Прочее"],
                                    "examples": ["Бензиновый"],
                                    "fillable_by": [
                                        "base",
                                        "base.ext",
                                        "customs.base"
                                    ]
                                }
                            }
                        },
                        "number": {
                            "description" : "Номер двигателя",
                            "type": ["string", "null"],
                            "examples": ["A 30038"],
                            "fillable_by": [
                                "base.taxi",
                                "base.ext"
                            ]
                        },
                        "model": {
                            "type": "object",
                            "properties": {
                                "name": {
                                    "description" : "Модель двигателя",
                                    "type": ["string", "null"],
                                    "examples": ["R4T9186"],
                                    "fillable_by": [
                                        "base.ext"
                                    ]
                                }
                            }
                        },
                        "volume": {
                            "description" : "Объем двигателя",
                            "type": ["number", "null"],
                            "minimum": 1,
                            "examples": [2792.1],
                            "fillable_by": [
                                "base",
                                "base.ext",
                                "gibdd.history",
                                "base.taxi"
                            ]
                        },

                        "power": {
                            "type": "object",
                            "properties": {
                                "hp": {
                                    "description" : "Мощность в ЛС",
                                    "type": ["number", "null"],
                                    "minimum": 1,
                                    "examples": [176.9],
                                    "fillable_by": [
                                        "base",
                                        "base.ext",
                                        "gibdd.history",
                                        "base.taxi"
                                    ]
                                },
                                "kw": {
                                    "description" : "Мощность в кВ",
                                    "type": ["number", "null"],
                                    "minimum": 1,
                                    "examples": [176.9],
                                    "fillable_by": [
                                        "base",
                                        "base.ext",
                                        "gibdd.history"
                                    ]
                                }
                            }
                        }
                    }
                },
                "weight": {
                    "type": "object",
                    "properties": {
                        "netto": {
                            "description" : "Разрешенная макс. масса",
                            "type": ["integer", "null"],
                            "minimum": 1,
                            "examples": [2590],
                            "fillable_by": [
                                "base",
                                "base.ext",
                                "gibdd.eaisto",
                                "base.taxi"
                            ]
                        },
                        "max": {
                            "description" : "Масса без нагрузки",
                            "type": ["integer", "null"],
                            "minimum": 1,
                            "examples": [3440],
                            "fillable_by": [
                                "base",
                                "base.ext",
                                "gibdd.eaisto",
                                "base.taxi"
                            ]
                        }
                    }
                },
                "transmission": {
                    "type": "object",
                    "properties": {
                        "type": {
                            "description" : "Тип трансмиссии",
                            "type": ["string", "null"],
                            "enum": ["AUTOMATIC", "MANUAL", "ROBOT", "VARIABLE", "UNKNOWN"],
                            "examples": ["AUTOMATIC"],
                            "fillable_by": []
                        }
                    }
                },
                "drive": {
                    "type": "object",
                    "properties": {
                        "type": {
                            "description" : "Тип привода",
                            "type": ["string", "null"],
                            "enum": ["Заднеприводной", "Переднеприводной", "Полноприводной", "Иные"],
                            "examples": ["Заднеприводной"],
                            "fillable_by": [
                                "base",
                                "base.ext"
                            ]
                        }
                    }
                },
                "wheel": {
                    "type": "object",
                    "properties": {
                        "position": {
                            "description" : "Расположение руля",
                            "type": ["string", "null"],
                            "enum": ["LEFT", "RIGHT", "UNKNOWN"],
                            "examples": ["RIGHT"],
                            "fillable_by": [
                                "base",
                                "base.ext",
                                "base.taxi"
                            ]
                        }
                    }
                }
            }
        },

        "additional_info": {
            "type": "object",
            "description": "Дополнительная информация",
            "properties": {
                "vehicle": {
                    "type": "object",
                    "properties": {
                        "category": {
                            "type": "object",
                            "properties": {
                                "code": {
                                    "description" : "Код категории ТС",
                                    "type": ["string", "null"],
                                    "enum": ["A", "A1", "B", "BE", "B1", "C", "CE", "C1", "C1E", "D", "DE", "D1", "D1E", "M", "TM", "TB"],
                                    "examples": ["TM"],
                                    "fillable_by": [
                                        "base",
                                        "base.ext",
                                        "base.taxi",
                                        "gibdd.eaisto"
                                    ]
                                },
                                "description": {
                                    "description" : "Описание категории ТС",
                                    "type": ["string", "null"],
                                    "examples": ["Трамваи"],
                                    "fillable_by": [
                                        "base",
                                        "base.ext",
                                        "base.taxi",
                                        "gibdd.eaisto"
                                    ]
                                }
                            }
                        },
                        "owner": {
                            "type": "object",
                            "properties": {
                                "type": {
                                    "description" : "Тип владельца (техники)",
                                    "type": ["string", "null"],
                                    "enum": ["PERSON", "LEGAL", "PERSONLEGAL", "UNKNOWN", "NONE"],
                                    "examples": ["LEGAL"],
                                    "fillable_by": [
                                        "base",
                                        "base.ext"
                                    ]
                                }
                            },
                            "geo": {
                                "description" : "Гео-данные владельца (техники)",
                                "oneOf": [
                                    { "type": "null" }, { "$ref": "#/definitions/geo_raw_data" }
                                ],
                                "fillable_by": [
                                    "base",
                                    "base.ext"
                                ]
                            }
                        },
                        "passport": {
                            "type": "object",
                            "properties": {
                                "date": {
                                    "type": "object",
                                    "properties": {
                                        "receive": {
                                            "description" : "Дата выдачи паспорта ТС",
                                            "oneOf": [
                                                { "type": "null" }, { "$ref": "#/definitions/datetime" }
                                            ],
                                            "examples": ["2018-08-05 00:00:00"],
                                            "fillable_by": [
                                                "base.ext"
                                            ]
                                        }
                                    }
                                },
                                "has_dublicate": {
                                    "description" : "Была ли замена ПТС?",
                                    "type": ["boolean", "null"],
                                    "examples": [false],
                                    "fillable_by": [
                                        "base.ext"
                                    ]
                                },
                                "number": {
                                    "description" : "Номер паспорта ТС (ПТС)",
                                    "oneOf": [
                                        { "type": "null" }, { "$ref": "#/definitions/pts_code" }
                                    ],
                                    "examples": ["8047307033"],
                                    "fillable_by": [
                                        "gibdd.history",
                                        "base.ext"
                                    ]
                                },
                                "org": {
                                    "type": "object",
                                    "properties": {
                                        "name": {
                                            "description" : "Кто выдал паспорт ТС",
                                            "type": ["string", "null"],
                                            "examples": ["ОАО СервисКазань"],
                                            "fillable_by": [
                                                "gibdd.history",
                                                "base.ext"
                                            ]
                                        }
                                    }
                                }
                            }
                        },
                        "sts": {
                            "type": "object",
                            "properties": {
                                "date": {
                                    "type": "object",
                                    "properties": {
                                        "receive": {
                                            "description" : "Дата выдачи СТС",
                                            "oneOf": [
                                                { "type": "null" }, { "$ref": "#/definitions/datetime" }
                                            ],
                                            "examples": ["2021-08-05 00:00:00"],
                                            "fillable_by": [
                                                "base.ext"
                                            ]
                                        }
                                    }
                                }
                            }
                        },
                        "modifications": {
                            "type": "object",
                            "properties": {
                                "was_modificated": {
                                    "description" : "Были ли изменения в конструкции ТС?",
                                    "type": ["boolean", "null"],
                                    "examples": [true],
                                    "fillable_by": [
                                        "base",
                                        "base.ext"
                                    ]
                                }
                            }
                        },
                        "notes": {
                            "type": "array",
                            "description" : "Заметки по ТС",
                            "items": {
                                "type": "string"
                            },
                            "fillable_by": [
                                "base.ext"
                            ]
                        }
                    }
                },
                "identifiers": {
                    "type": "object",
                    "properties": {
                        "vin": {
                            "type": "object",
                            "properties": {
                                "checksum_validated": {
                                    "description" : "Пройдена ли проверка контрольного символа VIN?",
                                    "type": ["boolean", "null"],
                                    "examples": [true],
                                    "fillable_by": [
                                        "base.tech"
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },

        "registration_actions": {
            "type": "object",
            "description": "Регистрационные действия",
            "properties": {}
        },

        "repairs": {
            "type": "object",
            "description": "Ремонтные работы",
            "properties": {}
        },

        "carfax": {
            "type": "object",
            "description": "CarFax",
            "properties": {}
        },

        "calculate": {
            "type": "object",
            "description": "Данные калькуляторов",
            "properties": {}
        },

        "car_price": {
            "type": "object",
            "description": "Стоимость ТС",
            "properties": {}
        },

        "fines": {
            "type": "object",
            "description": "Штрафы",
            "properties": {}
        },

        "leasings": {
            "type": "object",
            "description": "Лизинг",
            "properties": {}
        },

        "customs": {
            "type": "object",
            "description": "Данные по таможне",
            "properties": {}
        },

        "taxi": {
            "type": "object",
            "description": "Такси",
            "properties": {}
        },

        "pledges": {
            "type": "object",
            "description": "Обременения на ТС",
            "properties": {}
        },

        "insurance": {
            "type": "object",
            "description": "Страхование",
            "properties": {}
        },

        "accidents": {
            "type": "object",
            "description": "История ДТП",
            "properties": {}
        },

        "restrictions": {
            "type": "object",
            "description": "Ограничения",
            "properties": {}
        },

        "stealings": {
            "type": "object",
            "description": "Проверка на угон",
            "properties": {}
        },

        "ownership": {
            "type": "object",
            "description": "История владения",
            "properties": {}
        },

        "mileages": {
            "type": "object",
            "description": "Пробеги",
            "properties": {}
        },

        "diagnostic_cards": {
            "type": "object",
            "description": "Диагностические карты",
            "properties": {}
        },

        "utilizations": {
            "type": "object",
            "description": "Утилизация",
            "properties": {}
        },

        "images": {
            "type": "object",
            "description": "Фотографии ТС",
            "properties": {}
        }
    }
}
